# Test Inventory

| Path                                                       | Purpose                                                                   | Key mocks/fixtures                                            | Current status |
| ---------------------------------------------------------- | ------------------------------------------------------------------------- | ------------------------------------------------------------- | -------------- |
| tests/metrics.spec.ts                                      |                                                                           |                                                               | PASS / SKIP    |
| tests/notify.spec.ts                                       | Tests `guardian-notify` edge fn (Email/Slack alerts based on tier/limits) | `nock`, `EdgeRuntime`, mock Supabase client, mock env vars    | ❌ FAIL        |
| tests/perf.spec.ts                                         |                                                                           |                                                               | PASS / SKIP    |
| tests/feedback.spec.ts                                     | Tests `/api/guardian/alerts/feedback` route (POST/GET feedback)           | `jest.mock` (Supabase client/auth, next/headers, prom-client) | ❌ FAIL        |
| tests/event_buffer.spec.ts                                 |                                                                           |                                                               | PASS / SKIP    |
| tests/backfill.spec.ts                                     |                                                                           |                                                               | ❌ FAIL        |
| tests/scenarios.spec.ts                                    |                                                                           |                                                               | ❌ FAIL        |
| tests/blog.spec.ts                                         |                                                                           |                                                               | ❌ FAIL        |
| tests/risk_score.spec.ts                                   |                                                                           |                                                               | ❌ FAIL        |
| tests/rule_sets.spec.ts                                    |                                                                           |                                                               | ❌ FAIL        |
| tests/logging.spec.ts                                      |                                                                           |                                                               | PASS / SKIP    |
| tests/retention.spec.ts                                    | Tests `scrub_event_buffer` DB fn (scrub/purge old events)                 | Direct DB connection (`createClient`), `dayjs`, `uuid`        | ❌ FAIL        |
| tests/transactional.spec.ts                                |                                                                           |                                                               | PASS / SKIP    |
| tests/reactor.spec.ts                                      |                                                                           |                                                               | ❌ FAIL        |
| tests/validation.spec.ts                                   |                                                                           |                                                               | PASS / SKIP    |
| tests/alert-dispatch.integration.test.ts                   |                                                                           |                                                               | PASS / SKIP    |
| tests/rule-set-schema.test.ts                              |                                                                           |                                                               | PASS / SKIP    |
| tests/formatters.test.ts                                   |                                                                           |                                                               | PASS / SKIP    |
| **tests**/waitlist.test.ts                                 |                                                                           |                                                               | PASS / SKIP    |
| **tests**/rules.test.ts                                    |                                                                           |                                                               | PASS / SKIP    |
| **tests**/api/contact.test.ts                              |                                                                           |                                                               | ❌ FAIL        |
| tests/guardian/customRuleSet.test.ts                       |                                                                           |                                                               | ❌ FAIL        |
| tests/guardian/ruleEngine.test.ts                          |                                                                           |                                                               | ❌ FAIL        |
| tests/ui/NotificationStatus.test.tsx                       |                                                                           |                                                               | ❌ FAIL        |
| tests/components/docs/SidebarNav.test.tsx                  |                                                                           |                                                               | ❌ FAIL        |
| tests/components/RuleSetEditor.test.tsx                    |                                                                           |                                                               | PASS / SKIP    |
| tests/e2e/smoke.spec.ts                                    |                                                                           |                                                               | PASS / SKIP    |
| tests/e2e/docs.test.ts                                     |                                                                           |                                                               | PASS / SKIP    |
| tests/e2e/contact.test.ts                                  |                                                                           |                                                               | PASS / SKIP    |
| tests/lib/mdx/getDocBySlug.test.ts                         |                                                                           |                                                               | ❌ FAIL        |
| tests/db/rls.spec.ts                                       |                                                                           |                                                               | ❌ FAIL        |
| tests/unit/send-email-alert.test.ts                        |                                                                           |                                                               | ❌ FAIL        |
| tests/unit/send-slack-alert.test.ts                        |                                                                           |                                                               | ❌ FAIL        |
| tests/routes/oauth-callback.test.ts                        |                                                                           |                                                               | ❌ FAIL        |
| tests/admin/notification-channels.test.tsx                 |                                                                           |                                                               | PASS / SKIP    |
| tests/stripe/webhook.spec.ts                               |                                                                           |                                                               | ❌ FAIL        |
| tests/stripe/oauth.test.ts                                 |                                                                           |                                                               | PASS / SKIP    |
| tests/rules/velocityBreach.test.ts                         |                                                                           |                                                               | ❌ FAIL        |
| tests/rules/geoMismatch.test.ts                            |                                                                           |                                                               | ❌ FAIL        |
| tests/rules/bankSwap.test.ts                               |                                                                           |                                                               | ❌ FAIL        |
| scripts/generate-rss.test.ts                               |                                                                           |                                                               | ❌ FAIL        |
| packages/common/src/formatters.test.ts                     |                                                                           |                                                               | ❌ FAIL        |
| components/blog/BlogFooterSnippets.test.tsx                |                                                                           |                                                               | ❌ FAIL        |
| app/api/stripe/webhook/**tests**/route.test.ts             |                                                                           |                                                               | ❌ FAIL        |
| app/(dashboard)/accounts/ConnectedAccountsManager.test.tsx |                                                                           |                                                               | ❌ FAIL        |
| lib/**tests**/stripe.test.ts                               |                                                                           |                                                               | PASS / SKIP    |
| app/guardian-demo/**tests**/scenarios.test.ts              |                                                                           |                                                               | PASS / SKIP    |
| components/guardian-demo/**tests**/Countdown.test.tsx      |                                                                           |                                                               | PASS / SKIP    |
| components/guardian-demo/**tests**/ScenarioPicker.test.tsx |                                                                           |                                                               | PASS / SKIP    |
